

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Variables &amp; Statements &mdash; kOS 1.1.3.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/kos_theme.css" type="text/css" />
  

  

  
        <link rel="author" title="About these documents"
              href="../about.html"/>
        <link rel="copyright" title="Copyright" href="../copyright.html"/>
    <link rel="top" title="kOS 1.1.3.0 documentation" href="../index.html"/>
        <link rel="up" title="The KerboScript Language" href="../language.html"/>
        <link rel="next" title="KerboScript User Functions" href="user_functions.html"/>
        <link rel="prev" title="Flow Control" href="flow.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../contents.html" class="icon icon-home"> kOS
          

          
            
            <img src="../_static/kos_logo_small.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                1.1.3.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contents.html">Table of Contents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../downloads_links.html">Downloads and Links</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library.html">Community Example Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general.html">General</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../language.html">Language</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="features.html">General Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="syntax.html">Language Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="flow.html">Flow Control</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Variables</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="user_functions.html">User Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="anonymous.html">Anonymous User Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="delegates.html">Delegates (function references)</a></li>
<li class="toctree-l2"><a class="reference internal" href="delegates.html#advanced-topics">Advanced topics</a></li>
<li class="toctree-l2"><a class="reference internal" href="delegates.html#kinds-of-delegate-no-suffixes">Kinds of Delegate (no suffixes)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../math.html">Mathematics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../commands.html">Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../structures.html">Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../addons.html">Addons</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribute.html">Contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changes.html">Changes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../contents.html">kOS</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../contents.html">Docs</a> &raquo;</li>
      
          <li><a href="../language.html">The <strong>KerboScript</strong> Language</a> &raquo;</li>
      
    <li>Variables &amp; Statements</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/language/variables.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="variables-statements">
<h1>Variables &amp; Statements<a class="headerlink" href="#variables-statements" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#declare-to-is" id="id7"><code class="docutils literal"><span class="pre">DECLARE</span> <span class="pre">..</span> <span class="pre">TO/IS</span></code></a><ul>
<li><a class="reference internal" href="#what-it-does" id="id8">What it does:</a></li>
<li><a class="reference internal" href="#allowed-syntax" id="id9">Allowed Syntax:</a></li>
<li><a class="reference internal" href="#see-scoping" id="id10">See Scoping:</a></li>
<li><a class="reference internal" href="#initializer-required-in-declare" id="id11">Initializer required in DECLARE</a></li>
</ul>
</li>
<li><a class="reference internal" href="#declare-parameter" id="id12"><code class="docutils literal"><span class="pre">DECLARE</span> <span class="pre">PARAMETER</span></code></a><ul>
<li><a class="reference internal" href="#optional-parameters-defaulted-parameters" id="id13">Optional Parameters (defaulted parameters)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#set" id="id14"><code class="docutils literal"><span class="pre">SET</span></code></a></li>
<li><a class="reference internal" href="#defined" id="id15"><code class="docutils literal"><span class="pre">DEFINED</span></code></a><ul>
<li><a class="reference internal" href="#difference-between-set-and-declare-local-and-declare-global" id="id16">Difference between SET and DECLARE LOCAL and DECLARE GLOBAL</a></li>
<li><a class="reference internal" href="#when-to-use-global" id="id17">When to use GLOBAL</a></li>
</ul>
</li>
<li><a class="reference internal" href="#lock" id="id18"><code class="docutils literal"><span class="pre">LOCK</span></code></a><ul>
<li><a class="reference internal" href="#calling-a-lock-that-was-created-in-another-file" id="id19">Calling a LOCK that was created in another file</a></li>
<li><a class="reference internal" href="#local-lock" id="id20">Local lock</a></li>
</ul>
</li>
<li><a class="reference internal" href="#toggle" id="id21"><code class="docutils literal"><span class="pre">TOGGLE</span></code></a></li>
<li><a class="reference internal" href="#on" id="id22"><code class="docutils literal"><span class="pre">ON</span></code></a></li>
<li><a class="reference internal" href="#off" id="id23"><code class="docutils literal"><span class="pre">OFF</span></code></a></li>
<li><a class="reference internal" href="#scoping-terms" id="id24">Scoping terms</a></li>
<li><a class="reference internal" href="#scoping-syntax" id="id25">Scoping syntax</a><ul>
<li><a class="reference internal" href="#presumed-defaults" id="id26">Presumed defaults</a></li>
<li><a class="reference internal" href="#explicit-scoping-keywords" id="id27">Explicit scoping keywords</a></li>
<li><a class="reference internal" href="#explicit-scoping-required-for-lazyglobal-off" id="id28">Explicit Scoping required for &#64;lazyglobal off</a></li>
<li><a class="reference internal" href="#scoping-and-triggers" id="id29">Scoping and Triggers:</a></li>
<li><a class="reference internal" href="#lazyglobal-directive" id="id30"><code class="docutils literal"><span class="pre">&#64;LAZYGLOBAL</span></code> directive</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="declare-to-is">
<span id="declare"></span><h2><a class="toc-backref" href="#id7"><code class="docutils literal"><span class="pre">DECLARE</span> <span class="pre">..</span> <span class="pre">TO/IS</span></code></a><a class="headerlink" href="#declare-to-is" title="Permalink to this headline">¶</a></h2>
<div class="section" id="what-it-does">
<h3><a class="toc-backref" href="#id8">What it does:</a><a class="headerlink" href="#what-it-does" title="Permalink to this headline">¶</a></h3>
<p>Declares a variable, explicitly or implicitly defining what scope it
has, and gives it an initial value.</p>
</div>
<div class="section" id="allowed-syntax">
<h3><a class="toc-backref" href="#id9">Allowed Syntax:</a><a class="headerlink" href="#allowed-syntax" title="Permalink to this headline">¶</a></h3>
<div class="section" id="all-the-following-are-legal-declare-statements">
<h4>All the following are legal &#8220;declare&#8221; statements:<a class="headerlink" href="#all-the-following-are-legal-declare-statements" title="Permalink to this headline">¶</a></h4>
<p id="declare-syntax">The following alternate versions have identical meaning to each other:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">DECLARE</span></code> <em>identifier</em> <code class="docutils literal"><span class="pre">TO</span></code> <em>expression</em> <em>dot</em></li>
<li><code class="docutils literal"><span class="pre">DECLARE</span></code> <em>identifier</em> <code class="docutils literal"><span class="pre">IS</span></code> <em>expression</em> <em>dot</em></li>
<li><code class="docutils literal"><span class="pre">DECLARE</span></code> <code class="docutils literal"><span class="pre">LOCAL</span></code> <em>identifier</em> <code class="docutils literal"><span class="pre">TO</span></code> <em>expression</em> <em>dot</em></li>
<li><code class="docutils literal"><span class="pre">DECLARE</span></code> <code class="docutils literal"><span class="pre">LOCAL</span></code> <em>identifier</em> <code class="docutils literal"><span class="pre">IS</span></code> <em>expression</em> <em>dot</em></li>
<li><code class="docutils literal"><span class="pre">LOCAL</span></code> <em>identifier</em> <code class="docutils literal"><span class="pre">TO</span></code> <em>expression</em> <em>dot</em></li>
<li><code class="docutils literal"><span class="pre">LOCAL</span></code> <em>identifier</em> <code class="docutils literal"><span class="pre">IS</span></code> <em>expression</em> <em>dot</em></li>
</ul>
</div></blockquote>
<p>The following alternate versions have identical meaning to each other:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">DECLARE</span></code> <code class="docutils literal"><span class="pre">GLOBAL</span></code> <em>identifier</em> <code class="docutils literal"><span class="pre">TO</span></code> <em>expression</em> <em>dot</em></li>
<li><code class="docutils literal"><span class="pre">DECLARE</span></code> <code class="docutils literal"><span class="pre">GLOBAL</span></code> <em>identifier</em> <code class="docutils literal"><span class="pre">IS</span></code> <em>expression</em> <em>dot</em></li>
<li><code class="docutils literal"><span class="pre">GLOBAL</span></code> <em>identifier</em> <code class="docutils literal"><span class="pre">TO</span></code> <em>expression</em> <em>dot</em></li>
<li><code class="docutils literal"><span class="pre">GLOBAL</span></code> <em>identifier</em> <code class="docutils literal"><span class="pre">IS</span></code> <em>expression</em> <em>dot</em></li>
</ul>
</div></blockquote>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<div class="last versionadded">
<p><span class="versionmodified">New in version 0.17: </span><strong>*BREAKING CHANGE</strong>
The meaning, and syntax, of this statement changed considerably
in this update.  Prior to this version, DECLARE always created
global variables no matter where it appeared in the script.
See &#8216;initializer required&#8217; below.</p>
</div>
</div>
</div>
<div class="section" id="detailed-description-of-the-syntax">
<h4>Detailed Description of the syntax:<a class="headerlink" href="#detailed-description-of-the-syntax" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>The statement must begin with either the word <code class="docutils literal"><span class="pre">DECLARE</span></code>, <code class="docutils literal"><span class="pre">LOCAL</span></code>,
or <code class="docutils literal"><span class="pre">GLOBAL</span></code>.  If it begins with the word <code class="docutils literal"><span class="pre">DECLARE</span></code> it may optionally
also contain the word <code class="docutils literal"><span class="pre">LOCAL</span></code> or <code class="docutils literal"><span class="pre">GLOBAL</span></code> afterward.  <em>Note that if
neither</em> <code class="docutils literal"><span class="pre">GLOBAL</span></code> <em>nor</em> <code class="docutils literal"><span class="pre">LOCAL</span></code> <em>is used, the behavior of</em>
<code class="docutils literal"><span class="pre">LOCAL</span></code> <em>will be assumed implicitly.  Therefore</em> <code class="docutils literal"><span class="pre">DECLARE</span> <span class="pre">LOCAL</span></code>
<em>and just</em> <code class="docutils literal"><span class="pre">DECLARE</span></code> <em>and just</em> <code class="docutils literal"><span class="pre">LOCAL</span></code> <em>mean the same thing.</em></li>
<li>After that it must contain an identifier.</li>
<li>After that it must contain either the word <code class="docutils literal"><span class="pre">TO</span></code> or the word <code class="docutils literal"><span class="pre">IS</span></code>,
which mean the same thing here.</li>
<li>After that it must contain some expression for the initial starting
value of the variable.</li>
<li>After that it must contain a dot (&#8220;period&#8221;), like all commands in
Kerboscript.</li>
</ul>
<div class="highlight-kerboscript"><div class="highlight"><pre><span></span><span class="c1">// These all do the exact same thing - make a local variable:</span>
<span class="k">DECLARE</span> <span class="nv">X</span> <span class="ow">TO</span> <span class="mf">1</span><span class="p">.</span> <span class="c1">// assumes local when unspecified.</span>
<span class="k">LOCAL</span> <span class="nv">X</span> <span class="ow">IS</span> <span class="mf">1</span><span class="p">.</span>
<span class="k">DECLARE</span> <span class="k">LOCAL</span> <span class="nv">X</span> <span class="ow">IS</span> <span class="mf">1</span><span class="p">.</span>

<span class="c1">// These do the exact same thing - make a global variable:</span>
<span class="k">GLOBAL</span> <span class="nv">X</span> <span class="ow">IS</span> <span class="mf">1</span><span class="p">.</span>
<span class="k">DECLARE</span> <span class="k">GLOBAL</span> <span class="nv">X</span> <span class="ow">IS</span> <span class="mf">1</span><span class="p">.</span>
</pre></div>
</div>
</div></blockquote>
<p>If neither the scope word <code class="docutils literal"><span class="pre">GLOBAL</span></code> nor the scope word <code class="docutils literal"><span class="pre">LOCAL</span></code>
appear, a declare statement assumes <code class="docutils literal"><span class="pre">LOCAL</span></code> by default.</p>
<p>Any variable declared with <code class="docutils literal"><span class="pre">DECLARE</span></code>, <code class="docutils literal"><span class="pre">DECLARE</span> <span class="pre">LOCAL</span></code>, or <code class="docutils literal"><span class="pre">LOCAL</span></code>
will only exist inside the code block section it was created in.
After that code block is finished, the variable will no longer exist.</p>
</div>
</div>
<div class="section" id="see-scoping">
<h3><a class="toc-backref" href="#id10">See Scoping:</a><a class="headerlink" href="#see-scoping" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div>If you don&#8217;t know what the terms &#8220;global&#8221; or &#8220;local&#8221; mean, it&#8217;s
important to read the <a class="reference internal" href="#scope"><span>section below about scoping.</span></a></div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is implied that the outermost scope of a program file is
the global scope.  Therefore if you make a LOCAL variable at
the outermost nesting level of your program it really ends up
being GLOBAL.  Note that GLOBAL variables are not only shared
between functions of your script, but also can be seen by
other programs you run from the current program, and visa
versa.</p>
</div>
<p>Alternatively, a variable can be implicitly declared by any <code class="docutils literal"><span class="pre">SET</span></code> or
<code class="docutils literal"><span class="pre">LOCK</span></code> statement, however doing so causes the variable to always have
global scope.  <strong>The only way to make a variable be local instead of
global is to declare it explicitly with one of these DECLARE statements</strong>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><strong>Terminology: &#8220;declare statement&#8221;</strong>: Note that the documentation
will often refer to the phrase &#8220;declare statement&#8221; even when
referring to a statement in which the optional keyword &#8220;declare&#8221;
was left off.  A statement such as <code class="docutils literal"><span class="pre">LOCAL</span> <span class="pre">X</span> <span class="pre">IS</span> <span class="pre">1.</span></code> Will still
be referred to as a &#8220;declare statement&#8221;, even though the word
&#8220;declare&#8221; never explicitly appeared in it.</p>
</div>
</div>
<div class="section" id="initializer-required-in-declare">
<h3><a class="toc-backref" href="#id11">Initializer required in DECLARE</a><a class="headerlink" href="#initializer-required-in-declare" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<div class="last versionadded">
<p><span class="versionmodified">New in version 0.17: </span>The syntax without the initializer, looking like so:</p>
<div class="highlight-kerboscript"><div class="highlight"><pre><span></span><span class="k">DECLARE</span> <span class="nv">x</span><span class="p">.</span> <span class="c1">// no initializer like &quot;TO 1.&quot;</span>
</pre></div>
</div>
<p>is <strong>no longer legal syntax</strong>.</p>
</div>
</div>
<p>Kerboscript now requires the use of the initializer clause (the &#8220;TO&#8221;
keyword) after the identifier name so as to make it impossible for
there to exist any uninitialized variables in a script.</p>
</div>
</div>
<div class="section" id="declare-parameter">
<span id="id1"></span><h2><a class="toc-backref" href="#id12"><code class="docutils literal"><span class="pre">DECLARE</span> <span class="pre">PARAMETER</span></code></a><a class="headerlink" href="#declare-parameter" title="Permalink to this headline">¶</a></h2>
<p>If you put this statement in the main part of your script, it
declares variables to be used as a parameter that can be passed
in using the <code class="docutils literal"><span class="pre">RUN</span></code> command.</p>
<p>If you put this statement inside of a <a class="reference internal" href="user_functions.html#user-functions"><span>Function body</span></a>,
then it declares variables to be used as a parameter that can
be passed in to that function when calling the function.</p>
<p>Just as with a <a class="reference internal" href="#declare"><span>declare identifier statement</span></a>,
in a <code class="docutils literal"><span class="pre">declare</span> <span class="pre">parameter</span></code> statement, the actual keyword
<code class="docutils literal"><span class="pre">declare</span></code> need not be used.  The word <code class="docutils literal"><span class="pre">parameter</span></code> may
be used alone and that is legal syntax.</p>
<p>Program 1:</p>
<div class="highlight-kerboscript"><div class="highlight"><pre><span></span><span class="c1">// This is the contents of program1:</span>
<span class="k">DECLARE</span> <span class="kd">PARAMETER</span> <span class="nv">X</span><span class="p">.</span>
<span class="kd">PARAMETER</span> <span class="nv">Y</span><span class="p">.</span> <span class="c1">// omitting the word &quot;DECLARE&quot; - it still means the same thing.</span>
<span class="k">PRINT</span> <span class="s">&quot;X times Y is &quot;</span> <span class="o">+</span> <span class="nv">X</span><span class="o">*</span><span class="nv">Y</span><span class="p">.</span>
</pre></div>
</div>
<p>Program 2:</p>
<div class="highlight-kerboscript"><div class="highlight"><pre><span></span><span class="c1">// This is the contents of program2, which calls program1:</span>
<span class="k">SET</span> <span class="nv">A</span> <span class="ow">TO</span> <span class="mf">7</span><span class="p">.</span>
<span class="k">RUN</span> <span class="nv">PROGRAM1</span><span class="p">(</span> <span class="nv">A</span><span class="p">,</span> <span class="nv">A</span><span class="o">+</span><span class="mf">1</span> <span class="p">).</span>
</pre></div>
</div>
<p>The above example would give the output:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>X times Y is 56.
</pre></div>
</div>
<p>It is also possible to put more than one parameter into a single <code class="docutils literal"><span class="pre">DECLARE</span> <span class="pre">PARAMETER</span></code> statement, separated by commas, as shown below:</p>
<div class="highlight-kerboscript"><div class="highlight"><pre><span></span><span class="k">DECLARE</span> <span class="kd">PARAMETER</span> <span class="nv">X</span><span class="p">,</span> <span class="nv">Y</span><span class="p">,</span> <span class="nv">CheckFlag</span><span class="p">.</span>

<span class="c1">// Or you could leave &quot;DECLARE&quot; off like so:</span>
<span class="kd">PARAMETER</span> <span class="nv">X</span><span class="p">,</span> <span class="nv">Y</span><span class="p">,</span> <span class="nv">CheckFlag</span><span class="p">.</span>
</pre></div>
</div>
<p>Either of the above is exactly equivalent to:</p>
<div class="highlight-kerboscript"><div class="highlight"><pre><span></span><span class="kd">PARAMETER</span> <span class="nv">X</span><span class="p">.</span>
<span class="kd">PARAMETER</span> <span class="nv">Y</span><span class="p">.</span>
<span class="kd">PARAMETER</span> <span class="nv">CheckFlag</span><span class="p">.</span>
</pre></div>
</div>
<p>Note: Unlike normal variables, Parameter variables are always local to the program. When program A calls program B and passes parameters to it, program B can alter their values without affecting the values of the variables in program A.</p>
<dl class="docutils">
<dt>Caveat</dt>
<dd>This is only true if the values are primitive singleton values like numbers or booleans. If the values are Structures like Vectors or Lists, then they do end up behaving as if they were passed by reference, in the usual way that should be familiar to people who have used languages like Java or C# before.</dd>
</dl>
<p><strong>Illegal to say</strong> <code class="docutils literal"><span class="pre">DECLARE</span> <span class="pre">GLOBAL</span> <span class="pre">PARAMETER</span></code> : Because parameters
are always local to the location they were declared at, the keyword
<code class="docutils literal"><span class="pre">GLOBAL</span></code> is illegal to use in a <code class="docutils literal"><span class="pre">DECLARE</span> <span class="pre">PARAMETER</span></code> statement.</p>
<p>The <code class="docutils literal"><span class="pre">DECLARE</span> <span class="pre">PARAMETER</span></code> statements can appear anywhere in a program as long as they are in the file at a point earlier than the point at which the parameter is being used. The order the arguments need to be passed in by the caller is the order the <code class="docutils literal"><span class="pre">DECLARE</span> <span class="pre">PARAMETER</span></code> statements appear in the program being called.</p>
<div class="section" id="optional-parameters-defaulted-parameters">
<h3><a class="toc-backref" href="#id13">Optional Parameters (defaulted parameters)</a><a class="headerlink" href="#optional-parameters-defaulted-parameters" title="Permalink to this headline">¶</a></h3>
<p>If you wish, you may make some of the parameters of a program or a user
function optional by defaulting them to a starting value with the <code class="docutils literal"><span class="pre">IS</span></code> keyword, as follows:</p>
<div class="highlight-kerboscript"><div class="highlight"><pre><span></span><span class="c1">// Imagine this is a file called MYPROG</span>

<span class="k">DECLARE</span> <span class="kd">PARAMETER</span> <span class="nv">P1</span><span class="p">,</span> <span class="nv">P2</span><span class="p">,</span> <span class="nv">P3</span> <span class="ow">is</span> <span class="mf">0</span><span class="p">,</span> <span class="nv">P4</span> <span class="ow">is</span> <span class="s">&quot;cheese&quot;</span><span class="p">.</span>
<span class="k">print</span> <span class="nv">P1</span> <span class="o">+</span> <span class="s">&quot;, &quot;</span> <span class="o">+</span> <span class="nv">P2</span> <span class="o">+</span> <span class="s">&quot;, &quot;</span> <span class="o">+</span> <span class="nv">P3</span> <span class="o">+</span> <span class="s">&quot;, &quot;</span> <span class="o">+</span> <span class="nv">P4</span><span class="p">.</span>


<span class="c1">// Imagine this is a different file that runs it:</span>

<span class="k">run</span> <span class="nv">MYPROG</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="mf">2</span><span class="p">).</span>         <span class="c1">// prints &quot;1, 2, 0, cheese&quot;.</span>
<span class="k">run</span> <span class="nv">MYPROG</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="mf">2</span><span class="p">,</span><span class="mf">3</span><span class="p">).</span>       <span class="c1">// prints &quot;1, 2, 3, cheese&quot;.</span>
<span class="k">run</span> <span class="nv">MYPROG</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="mf">2</span><span class="p">,</span><span class="mf">3</span><span class="p">,</span><span class="s">&quot;hi&quot;</span><span class="p">).</span>  <span class="c1">// prints &quot;1, 2, 3, hi&quot;.</span>
<span class="nv">runpath</span><span class="p">(</span><span class="nv">MYPROG</span><span class="p">,</span><span class="mf">1</span><span class="p">,</span><span class="mf">2</span><span class="p">,</span><span class="mf">3</span><span class="p">,</span><span class="s">&quot;hi&quot;</span><span class="p">).</span>  <span class="c1">// also prints &quot;1, 2, 3, hi&quot;.</span>
</pre></div>
</div>
<p>Whenever arguments are missing, the system always makes up the difference by
using defaults for the lastmost parameters until the correct number have been
padded.  (So for example, if you call MYFUNC() above with 3 arguments, it&#8217;s
the last argument, P4, that gets defaulted, but P3 does not.  But if you call
it with 2 arguments, both P4 and P3 get defaulted.)</p>
<p>It is illegal to put mandatory (not defaulted) parameters after defaulted ones.</p>
<p>This will not work:</p>
<div class="highlight-kerboscript"><div class="highlight"><pre><span></span><span class="k">DECLARE</span> <span class="kd">PARAMETER</span> <span class="nv">thisIsOptional</span> <span class="ow">is</span> <span class="mf">0</span><span class="p">,</span>
                  <span class="nv">thisIsOptionalToo</span> <span class="ow">is</span> <span class="mf">0</span><span class="p">.</span>
                  <span class="nv">thisIsMandatory</span><span class="p">.</span>
</pre></div>
</div>
<p>Because the optional parameters didn&#8217;t come at the end.</p>
<div class="section" id="default-parameters-follow-short-circuit-logic">
<h4>Default parameters follow short-circuit logic<a class="headerlink" href="#default-parameters-follow-short-circuit-logic" title="Permalink to this headline">¶</a></h4>
<p>Remember that if you have an optional parameter with an initializer
expression, the expression will not get executed if the calling
function had an argument present in that position.  The expression
only gets executed if the system needed to pad a missing argument.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<div class="last versionadded">
<p><span class="versionmodified">New in version 0.18.3: </span>Optional Parameters were added as a new feature in kOS 0.18.3</p>
</div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>Pass By Value</strong></p>
<p>The following paragraph is important for people familiar with other programming languages. If you are new to programming and don&#8217;t understand what it is saying, that&#8217;s okay you can ignore it.</p>
<p class="last">At the moment the only kind of parameter supported is a pass-by-value parameter, and pass-by reference parameters don&#8217;t exist. Be aware, however, that due to the way kOS is implemented on top of a reference-using object-oriented language (CSharp), if you pass an argument which is a complex aggregate structure (i.e. a Vector, or a List - anything that kOS lets you use a colon suffix with), then the parameters will behave exactly like being passed by reference because all you&#8217;re passing is the handle to the object rather than the object itself. This should be familiar behavior to anyone who has written software in Java or C# before.</p>
</div>
</div>
</div>
</div>
<div class="section" id="set">
<span id="id2"></span><h2><a class="toc-backref" href="#id14"><code class="docutils literal"><span class="pre">SET</span></code></a><a class="headerlink" href="#set" title="Permalink to this headline">¶</a></h2>
<p>Sets the value of a variable. Implicitly creates a global variable if it doesn’t already exist:</p>
<div class="highlight-kerboscript"><div class="highlight"><pre><span></span><span class="k">SET</span> <span class="nv">X</span> <span class="ow">TO</span> <span class="mf">1</span><span class="p">.</span>
<span class="k">SET</span> <span class="nv">X</span> <span class="ow">TO</span> <span class="nv">y</span><span class="o">*</span><span class="mf">2</span> <span class="o">-</span> <span class="mf">1</span><span class="p">.</span>
</pre></div>
</div>
<p>This follows the <a class="reference internal" href="#scope"><span>scoping rules explained below</span></a>.  If the
variable can be found in the current local scope, or any scope higher
up, then it won&#8217;t be created and instead the existing one will be used.</p>
</div>
<div class="section" id="defined">
<span id="id3"></span><h2><a class="toc-backref" href="#id15"><code class="docutils literal"><span class="pre">DEFINED</span></code></a><a class="headerlink" href="#defined" title="Permalink to this headline">¶</a></h2>
<div class="highlight-kerboscript"><div class="highlight"><pre><span></span><span class="k">DEFINED</span> <span class="nv">identifier</span>
</pre></div>
</div>
<p>Returns a boolean true or false according to whether or not an
identifier is defined in such a way that you can use it from
this part of the program.  (i.e. is it declared and is it in scope
and visible right now):</p>
<div class="highlight-kerboscript"><div class="highlight"><pre><span></span><span class="c1">// This part prints &#39;doesn&#39;t exist&quot;:</span>
<span class="k">if</span> <span class="k">defined</span> <span class="nv">var1</span> <span class="p">{</span>
  <span class="k">print</span> <span class="s">&quot;var1 exists&quot;</span><span class="p">.</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="k">print</span> <span class="s">&quot;var1 doesn&#39;t exist.&quot;</span>
<span class="p">}</span>

<span class="k">local</span> <span class="nv">var1</span> <span class="ow">is</span> <span class="mf">0</span><span class="p">.</span>

<span class="c1">// But now it prints that it does exist:</span>
<span class="k">if</span> <span class="k">defined</span> <span class="nv">var1</span> <span class="p">{</span>
  <span class="k">print</span> <span class="s">&quot;var1 exists&quot;</span><span class="p">.</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="k">print</span> <span class="s">&quot;var1 doesn&#39;t exist.&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The DEFINED operator pays attention to all the normal scoping rules
described in the <a class="reference internal" href="#scope"><span>scoping section below</span></a>.  If an identifier
does exist but is not usable from the current scope, it will return false.</p>
<p>Note that DEFINED does not work well on things that are not pure identifiers.
for example:</p>
<div class="highlight-kerboscript"><div class="highlight"><pre><span></span><span class="k">print</span> <span class="k">defined</span> <span class="nv">var1</span><span class="p">:</span><span class="nv">suffix1</span><span class="p">.</span>
</pre></div>
</div>
<p>is going to end up printing &#8220;False&#8221; because it&#8217;s looking for pure identifiers,
not complex suffix chains, and there&#8217;s no identifier called &#8220;var1:suffix1&#8221;.</p>
<div class="section" id="difference-between-set-and-declare-local-and-declare-global">
<h3><a class="toc-backref" href="#id16">Difference between SET and DECLARE LOCAL and DECLARE GLOBAL</a><a class="headerlink" href="#difference-between-set-and-declare-local-and-declare-global" title="Permalink to this headline">¶</a></h3>
<p>The following three examples look very similar and you might ask
why you&#8217;d pick one instead of the other:</p>
<div class="highlight-kerboscript"><div class="highlight"><pre><span></span><span class="k">SET</span> <span class="nv">X</span> <span class="ow">TO</span> <span class="mf">1</span><span class="p">.</span>
<span class="k">DECLARE</span> <span class="k">LOCAL</span> <span class="nv">X</span> <span class="ow">TO</span> <span class="mf">1</span><span class="p">.</span>
<span class="k">DECLARE</span> <span class="k">GLOBAL</span> <span class="nv">X</span> <span class="ow">TO</span> <span class="mf">1</span><span class="p">.</span>
</pre></div>
</div>
<p>They are slightly different, as follows:</p>
<p><code class="docutils literal"><span class="pre">SET</span> <span class="pre">X</span> <span class="pre">TO</span> <span class="pre">1.</span></code> Performs the following activity:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Attempt to find an already existing local X.  If found, set it to 1.</li>
<li>Try again for each scoping level outside the current one.</li>
<li>If and only if it gets all the way out to global scope and it still
hasn&#8217;t found an X, then create a new X with value 1, and do so at
global scope.  This behavior is called making a &#8220;lazy global&#8221;.</li>
</ol>
</div></blockquote>
<p><code class="docutils literal"><span class="pre">DECLARE</span> <span class="pre">LOCAL</span> <span class="pre">X</span> <span class="pre">TO</span> <span class="pre">1.</span></code> Performs the following activity:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Immediately make a new X right here at the local-most scope.
Set it to 1.</li>
</ol>
</div></blockquote>
<p><code class="docutils literal"><span class="pre">DECLARE</span> <span class="pre">GLOBAL</span> <span class="pre">X</span> <span class="pre">TO</span> <span class="pre">1.</span></code> Performs the following activity:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Ignore whether or not there are any existing X&#8217;s in a local scope.</li>
<li>Immediately go all the way to global scope and make a new X there.
Set it to 1.</li>
</ol>
</div></blockquote>
</div>
<div class="section" id="when-to-use-global">
<h3><a class="toc-backref" href="#id17">When to use GLOBAL</a><a class="headerlink" href="#when-to-use-global" title="Permalink to this headline">¶</a></h3>
<p>You should use a <code class="docutils literal"><span class="pre">DECLARE</span> <span class="pre">GLOBAL</span></code> statement only sparingly.  It
mostly exists so that a function can store values &#8220;in the caller&#8221;
for the caller to get its hands on.  It&#8217;s generally a &#8220;sloppy&#8221; design
pattern to use, and it&#8217;s much better to keep everything local
and only pass back things to the caller as return values.</p>
</div>
</div>
<div class="section" id="lock">
<h2><a class="toc-backref" href="#id18"><code class="docutils literal"><span class="pre">LOCK</span></code></a><a class="headerlink" href="#lock" title="Permalink to this headline">¶</a></h2>
<p>Declares that the identifier will refer to an expression that is always re-evaluated on the fly every time it is used (See also <a class="reference internal" href="flow.html#lock"><span>Flow Control documentation</span></a>):</p>
<div class="highlight-kerboscript"><div class="highlight"><pre><span></span><span class="k">SET</span> <span class="nv">Y</span> <span class="ow">TO</span> <span class="mf">1</span><span class="p">.</span>
<span class="k">LOCK</span> <span class="nv">X</span> <span class="ow">TO</span> <span class="nv">Y</span> <span class="o">+</span> <span class="mf">1</span><span class="p">.</span>
<span class="k">PRINT</span> <span class="nv">X</span><span class="p">.</span>    <span class="c1">// prints &quot;2&quot;</span>
<span class="k">SET</span> <span class="nv">Y</span> <span class="ow">TO</span> <span class="mf">2</span><span class="p">.</span>
<span class="k">PRINT</span> <span class="nv">X</span><span class="p">.</span>    <span class="c1">// prints &quot;3&quot;</span>
</pre></div>
</div>
<p>Note that because of how LOCK expressions are in fact implemented as mini
functions, they cannot have local scope.  A LOCK <em>always</em> has global scope.</p>
<p>By default a <code class="docutils literal"><span class="pre">LOCK</span></code> expression is <code class="docutils literal"><span class="pre">GLOBAL</span></code> when made.  This is
necessary for backward compatibility with older scripts that use
LOCK STEERING from inside triggers, loops, etc, and expect it to
affect the global steering value.</p>
<div class="section" id="calling-a-lock-that-was-created-in-another-file">
<h3><a class="toc-backref" href="#id19">Calling a LOCK that was created in another file</a><a class="headerlink" href="#calling-a-lock-that-was-created-in-another-file" title="Permalink to this headline">¶</a></h3>
<p>If you try to call a lock that is declared in another program
file you run, it does not work, and has never worked prior to kOS
0.17.0:</p>
<p>File1.ks:</p>
<div class="highlight-kerboscript"><div class="highlight"><pre><span></span><span class="k">run</span> <span class="nv">File2</span><span class="p">.</span>
<span class="k">print</span> <span class="s">&quot;x&#39;s locked value is &quot;</span> <span class="o">+</span> <span class="nv">x</span><span class="p">.</span>
</pre></div>
</div>
<p>File2.ks:</p>
<div class="highlight-kerboscript"><div class="highlight"><pre><span></span><span class="k">lock</span> <span class="nv">x</span> <span class="ow">to</span> <span class="s">&quot;this is x&quot;</span><span class="p">.</span>
</pre></div>
</div>
<p>But now with the Kerboscript of kOS 0.17.0, you can make it work
by inserting empty parentheses after the lock name to help give
the compiler the hint that you expected x to be a function call
(which is what a lock really is):</p>
<p>Change this line:</p>
<div class="highlight-kerboscript"><div class="highlight"><pre><span></span><span class="k">print</span> <span class="s">&quot;x&#39;s locked value is &quot;</span> <span class="o">+</span> <span class="nv">x</span><span class="p">.</span>
</pre></div>
</div>
<p>To this instead:</p>
<div class="highlight-kerboscript"><div class="highlight"><pre><span></span><span class="k">print</span> <span class="s">&quot;x&#39;s locked value is &quot;</span> <span class="o">+</span> <span class="nv">x</span><span class="p">().</span>
</pre></div>
</div>
<p>and it should work.</p>
</div>
<div class="section" id="local-lock">
<h3><a class="toc-backref" href="#id20">Local lock</a><a class="headerlink" href="#local-lock" title="Permalink to this headline">¶</a></h3>
<p>You can explicitly make a <code class="docutils literal"><span class="pre">LOCK</span></code> statement be LOCAL with the <code class="docutils literal"><span class="pre">LOCAL</span></code>
keyword, like so:</p>
<p><code class="docutils literal"><span class="pre">LOCAL</span> <span class="pre">LOCK</span></code> identifier <code class="docutils literal"><span class="pre">TO</span></code> expression.</p>
<p>But be aware that doing so with a cooked steering control such
as THROTTLE or STEERING will not actually affect your ship.  The
automated cooked steering control is only reading the GLOBAL locks
for these settings.</p>
<p>The purpose of making a LOCAL lock is if you only need to use the
value temporarily for the duration of a function call, loop, or
if-statement body, and then you don&#8217;t care about it anymore after
that.</p>
<div class="section" id="why-do-i-care-about-a-local-lock">
<h4>Why do I care about a local lock?<a class="headerlink" href="#why-do-i-care-about-a-local-lock" title="Permalink to this headline">¶</a></h4>
<p>You care because in order to make a LOCK work even after the variables
it&#8217;s using in its expression go out of scope (which is necessary
for LOCK STEERING or LOCK THROTTLE to work if done from inside
a user function call or trigger body), locks need to preserve
a thing called a &#8220;closure&#8221;.
( <a class="reference external" href="http://en.wikipedia.org/wiki/Closure_(computer_programming">http://en.wikipedia.org/wiki/Closure_(computer_programming</a>)</p>
<p>When they do this, it means none of the local variables used
in the function body they were declared in truly &#8220;go away&#8221; from
memory.  They live on, taking up space until the lock disappears.
Making the lock be local tells the computer that it can make the lock
disappear when it goes out of scope, and thus it doesn&#8217;t need to
hold that &#8220;closure&#8221; around forever.</p>
<p>The tl;dr version:  It&#8217;s more efficient for memory.  If you know
for sure that your lock isn&#8217;t getting used after your current
section of code is over, make it a local lock.</p>
</div>
</div>
</div>
<div class="section" id="toggle">
<span id="id4"></span><h2><a class="toc-backref" href="#id21"><code class="docutils literal"><span class="pre">TOGGLE</span></code></a><a class="headerlink" href="#toggle" title="Permalink to this headline">¶</a></h2>
<p>Toggles a variable between <code class="docutils literal"><span class="pre">TRUE</span></code> or <code class="docutils literal"><span class="pre">FALSE</span></code>. If the variable in question starts out as a number, it will be converted to a boolean and then toggled. This is useful for setting action groups, which are activated whenever their values are inverted:</p>
<div class="highlight-kerboscript"><div class="highlight"><pre><span></span><span class="k">TOGGLE</span> <span class="nv">AG1</span><span class="p">.</span> <span class="c1">// Fires action group 1.</span>
<span class="k">TOGGLE</span> <span class="nv">SAS</span><span class="p">.</span> <span class="c1">// Toggles SAS on or off.</span>
</pre></div>
</div>
<p>This follows the same rules as <a class="reference internal" href="#set"><span>SET</span></a>, in that if the variable in
question doesn&#8217;t already exist, it will end up creating it as a global
variable.</p>
</div>
<div class="section" id="on">
<span id="id5"></span><h2><a class="toc-backref" href="#id22"><code class="docutils literal"><span class="pre">ON</span></code></a><a class="headerlink" href="#on" title="Permalink to this headline">¶</a></h2>
<p>Sets a variable to <code class="docutils literal"><span class="pre">TRUE</span></code>. This is useful for the <code class="docutils literal"><span class="pre">RCS</span></code> and <code class="docutils literal"><span class="pre">SAS</span></code> bindings:</p>
<div class="highlight-kerboscript"><div class="highlight"><pre><span></span><span class="nv">RCS</span> <span class="nb">ON</span><span class="p">.</span>  <span class="c1">// Turns on the RCS</span>
</pre></div>
</div>
<p>This follows the same rules as <a class="reference internal" href="#set"><span>SET</span></a>, in that if the variable in
question doesn&#8217;t already exist, it will end up creating it as a global
variable.</p>
</div>
<div class="section" id="off">
<span id="id6"></span><h2><a class="toc-backref" href="#id23"><code class="docutils literal"><span class="pre">OFF</span></code></a><a class="headerlink" href="#off" title="Permalink to this headline">¶</a></h2>
<p>Sets a variable to <code class="docutils literal"><span class="pre">FALSE</span></code>. This is useful for the <code class="docutils literal"><span class="pre">RCS</span></code> and <code class="docutils literal"><span class="pre">SAS</span></code> bindings:</p>
<div class="highlight-kerboscript"><div class="highlight"><pre><span></span><span class="nv">RCS</span> <span class="nb">OFF</span><span class="p">.</span>  <span class="c1">// Turns off the RCS</span>
</pre></div>
</div>
<p>This follows the same rules as <a class="reference internal" href="#set"><span>SET</span></a>, in that if the variable in
question doesn&#8217;t already exist, it will end up creating it as a global
variable.</p>
</div>
<div class="section" id="scoping-terms">
<span id="scope"></span><h2><a class="toc-backref" href="#id24">Scoping terms</a><a class="headerlink" href="#scoping-terms" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<div class="last versionadded">
<p><span class="versionmodified">New in version 0.17: </span>In prior versions of Kerboscript, all identifiers other than
DECLARE PARAMETER identifiers were always global variables no
matter what, even if you used the DECLARE statement to make them.</p>
</div>
</div>
<dl class="docutils">
<dt>What is Scope?</dt>
<dd>The term <em>Scope</em> simply refers to asking the question &#8220;where in the
code can this variable be used, and how long does it last before it
goes away?&#8221;  The <em>scope</em> of a variable is the section of the program&#8217;s
code that it &#8220;works&#8221; within.  Any section of the program&#8217;s code
from which the variable cannot be seen is said to be &#8220;out of that
variable&#8217;s scope&#8221;.</dd>
<dt>Global scope</dt>
<dd>The simplest scope is called &#8220;global&#8221;.  Global scope simply means
&#8220;this variable can be used from anywhere in the program&#8221;.  If you
never use the DECLARE statement, then your variables in Kerboscript
will all be in <em>global scope</em>.  For simple easy scripts used by
beginners, this is often enough and you don&#8217;t have to read the rest
of this topic until you start advancing to more intermediate scripts.</dd>
<dt>Local Scope</dt>
<dd>Kerboscript uses block scoping to keep track of local variable
scope.  This means you can have variables that are not only
local to a function, but are in fact actually local to JUST
the current curly-brace block of statements, even if that block
of statements is, say, the body of an IF check, or the body of
an UNTIL loop.</dd>
<dt>Why limit scope?</dt>
<dd>You might be wondering why it&#8217;s useful to limit the scope of a
variable.  Wouldn&#8217;t it be easier just to make all variables
global?  The answer is twofold: (1) Once a program becomes large
enough, trying to remember the name of every variable in the
program, and having to keep coming up with new names for new
variables, can be a large unmanageable chore, especially with
programs written by more than one person collaborating together.
(2) Even if you can keep track of all that in your head, there&#8217;s
a certain programming technique known as recursion
( <a class="reference external" href="http://en.wikipedia.org/wiki/Recursion#In_computer_science">http://en.wikipedia.org/wiki/Recursion#In_computer_science</a> )
in which you actually NEED to have local variable scope for
the technique to even work at all.</dd>
</dl>
<p>If you need to have variables that only have local scope, either just
to keep your code more manageable, or because you literally need
local scope to allow for recursive function calls, then you use the
<code class="docutils literal"><span class="pre">DECLARE</span> <span class="pre">LOCAL</span></code> statement (or just <code class="docutils literal"><span class="pre">LOCAL</span></code> for short) to create
the variables.</p>
</div>
<div class="section" id="scoping-syntax">
<h2><a class="toc-backref" href="#id25">Scoping syntax</a><a class="headerlink" href="#scoping-syntax" title="Permalink to this headline">¶</a></h2>
<div class="section" id="presumed-defaults">
<h3><a class="toc-backref" href="#id26">Presumed defaults</a><a class="headerlink" href="#presumed-defaults" title="Permalink to this headline">¶</a></h3>
<p>The DECLARE keyword and the LOCK keyword have some default
presumed scoping behaviors:</p>
<p><code class="docutils literal"><span class="pre">DECLARE</span></code> Is assumed to always be LOCAL when not otherwise specified.</p>
<p><code class="docutils literal"><span class="pre">FUNCTION</span></code> Must always be LOCAL.  Declaring it as global has no effect,
so the only way to make it be global is to declare it while at outermost
scope.  This is because functions always remember their closures, and
so to declare a function as global while it holds closure information
about local variables would be contradictory.</p>
<p><code class="docutils literal"><span class="pre">PARAMETER</span></code> Cannot be anything but LOCAL to the location it&#8217;s mentioned.
It is an error to attempt to declare a parameter with the GLOBAL keyword.</p>
<p><code class="docutils literal"><span class="pre">LOCK</span></code> Is assumed to always be GLOBAL when not otherwise specified.
this is necessary to preserve backward compatibility with how cooked
controls such as LOCK STEERING and LOCK THROTTLE work.</p>
</div>
<div class="section" id="explicit-scoping-keywords">
<h3><a class="toc-backref" href="#id27">Explicit scoping keywords</a><a class="headerlink" href="#explicit-scoping-keywords" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">DECLARE</span></code>, <code class="docutils literal"><span class="pre">FUNCTION</span></code>, and <code class="docutils literal"><span class="pre">LOCK</span></code> commands can be given
explicit <code class="docutils literal"><span class="pre">GLOBAL</span></code> or <code class="docutils literal"><span class="pre">LOCAL</span></code> keywords to define their intended
scoping level (however in the case of functions, <code class="docutils literal"><span class="pre">GLOBAL</span></code> will be
igorned, see above under &#8216;Presumed defaults&#8217;.):</p>
<div class="highlight-kerboscript"><div class="highlight"><pre><span></span><span class="c1">//</span>
<span class="c1">// These are all synonymous with each other:</span>
<span class="c1">//</span>
<span class="k">DECLARE</span> <span class="nv">X</span> <span class="ow">TO</span> <span class="mf">1</span><span class="p">.</span>
<span class="k">DECLARE</span> <span class="k">LOCAL</span> <span class="nv">X</span> <span class="ow">TO</span> <span class="mf">1</span><span class="p">.</span>
<span class="k">LOCAL</span> <span class="nv">X</span> <span class="ow">TO</span> <span class="mf">1</span><span class="p">.</span> <span class="c1">// &#39;declare&#39; is implied and optional when scoping words are used</span>
<span class="k">LOCAL</span> <span class="nv">X</span> <span class="ow">IS</span> <span class="mf">1</span><span class="p">.</span> <span class="c1">// &#39;declare&#39; is implied and optional when scoping words are used</span>
<span class="c1">//</span>
<span class="c1">// These are all synonymous with each other:</span>
<span class="c1">//</span>
<span class="k">DECLARE</span> <span class="k">GLOBAL</span> <span class="nv">X</span> <span class="ow">TO</span> <span class="mf">1</span><span class="p">.</span>
<span class="k">GLOBAL</span> <span class="nv">X</span> <span class="ow">TO</span> <span class="mf">1</span><span class="p">.</span> <span class="c1">// &#39;declare&#39; is implied and optional when scoping words are used</span>
<span class="k">GLOBAL</span> <span class="nv">X</span> <span class="ow">IS</span> <span class="mf">1</span><span class="p">.</span> <span class="c1">// &#39;declare&#39; is implied and optional when scoping words are used</span>
</pre></div>
</div>
<p>Even when the word &#8216;DECLARE&#8217; is left off, the statement can still be
referred to as a &#8220;declare statement&#8221;.  The word &#8220;declare&#8221; is implied
by the use of LOCAL or GLOBAL and you are allowed to leave it off
merely to reduce verbosity.</p>
</div>
<div class="section" id="explicit-scoping-required-for-lazyglobal-off">
<h3><a class="toc-backref" href="#id28">Explicit Scoping required for &#64;lazyglobal off</a><a class="headerlink" href="#explicit-scoping-required-for-lazyglobal-off" title="Permalink to this headline">¶</a></h3>
<p>Note that when operating under the <a class="reference internal" href="#lazyglobal"><span>&#64;LAZYGLOBAL OFF</span></a>
directive the keywords LOCAL and GLOBAL are no longer optional for
<strong>declare identifier</strong> statements, and are in fact required.  You
are not allowed to rely on these presumed defaults when you&#8217;ve
turned off LAZYGLOBAL.  (This only applies to trying to make
a variable with <strong>declare identifier to value</strong>, and not to
<code class="docutils literal"><span class="pre">declare</span> <span class="pre">parameter</span></code> or <code class="docutils literal"><span class="pre">declare</span> <span class="pre">function</span></code>.)</p>
<div class="section" id="locals-stated-at-the-global-level-are-global">
<h4>Locals stated at the global level are global<a class="headerlink" href="#locals-stated-at-the-global-level-are-global" title="Permalink to this headline">¶</a></h4>
<p>Note that if you put a statement at the outermost scope
of the program, then there is effectively no difference
between a <code class="docutils literal"><span class="pre">DECLARE</span> <span class="pre">LOCAL</span></code> (or just <code class="docutils literal"><span class="pre">LOCAL</span></code> for short)
and a <code class="docutils literal"><span class="pre">DECLARE</span> <span class="pre">GLOBAL</span></code> (or just <code class="docutils literal"><span class="pre">GLOBAL</span></code> for short) statement.
They are both going to make a variable at global scope because that&#8217;s
the scope the program was in when the statement was encountered.</p>
<p>Examples:</p>
<div class="highlight-kerboscript"><div class="highlight"><pre><span></span><span class="k">GLOBAL</span> <span class="nv">x</span> <span class="ow">IS</span> <span class="mf">10</span><span class="p">.</span> <span class="c1">// X is now a global variable with value 10,</span>
<span class="k">SET</span> <span class="nv">y</span> <span class="ow">TO</span> <span class="mf">20</span><span class="p">.</span> <span class="c1">// Y is now a global variable (implicitly) with value 20.</span>
<span class="k">LOCAL</span> <span class="nv">z</span> <span class="ow">IS</span> <span class="mf">0</span><span class="p">.</span>  <span class="c1">// Z is now a global variable</span>
               <span class="c1">// because even though this says LOCAL, it was</span>
               <span class="c1">// stated at the outermost, global scope.</span>

<span class="k">SET</span> <span class="nv">sum</span> <span class="ow">to</span> <span class="o">-</span><span class="mf">1</span><span class="p">.</span> <span class="c1">// sum is now an implicitly made global variable, containing -1.</span>

<span class="c1">// A function to return the mean average of all the items in the list</span>
<span class="c1">// passed into it, under the assumption all the items in the list are</span>
<span class="c1">// numbers of some sort:</span>
<span class="kd">FUNCTION</span> <span class="nv">calcAverage</span> <span class="p">{</span>
  <span class="kd">PARAMETER</span> <span class="nv">inputList</span><span class="p">.</span>

  <span class="k">LOCAL</span> <span class="nv">sum</span> <span class="ow">IS</span> <span class="mf">0</span><span class="p">.</span> <span class="c1">// sum is now local to this function&#39;s body.</span>
  <span class="k">FOR</span> <span class="nv">val</span> <span class="nv">IN</span> <span class="nv">inputList</span> <span class="p">{</span>
    <span class="k">SET</span> <span class="nv">sum</span> <span class="ow">TO</span> <span class="nv">sum</span> <span class="o">+</span> <span class="nv">val</span><span class="p">.</span>
  <span class="p">}.</span>
  <span class="k">print</span> <span class="s">&quot;Inside calcAverage, sum is &quot;</span> <span class="o">+</span> <span class="nv">sum</span><span class="p">.</span>
  <span class="k">RETURN</span> <span class="nv">sum</span> <span class="o">/</span> <span class="nv">inputList</span><span class="p">:</span><span class="nv">LENGTH</span><span class="p">.</span>
<span class="p">}.</span>

<span class="k">SET</span> <span class="nv">testList</span> <span class="ow">TO</span> <span class="k">LIST</span><span class="p">(</span><span class="mf">5</span><span class="p">,</span><span class="mf">10</span><span class="p">,</span><span class="mf">15</span><span class="p">)</span><span class="err">;</span>
<span class="k">print</span> <span class="s">&quot;average is &quot;</span> <span class="o">+</span> <span class="nv">calcAverage</span><span class="p">(</span><span class="nv">testList</span><span class="p">).</span>
<span class="k">print</span> <span class="s">&quot;but out here where it&#39;s global, sum is still &quot;</span> <span class="o">+</span> <span class="nv">sum</span><span class="p">.</span>
</pre></div>
</div>
<p>This example will print:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>Inside calcAverage, sum is 30
average is 10
but out here where it&#39;s global, sum is still -1
</pre></div>
</div>
<p>Thus proving that the variable called SUM inside the function is NOT the
same variable as the one called SUM out in the global main code.</p>
</div>
<div class="section" id="nesting">
<h4>Nesting<a class="headerlink" href="#nesting" title="Permalink to this headline">¶</a></h4>
<p>The scoping rules are nested as well.  If you attempt to use a
variable that doesn&#8217;t exist in the local scope, the next scope &#8220;outside&#8221;
it will be used, and if it doesn&#8217;t exist there, the next scope &#8220;outside&#8221;
that will be used and so on, all the way up to the global scope.  Only
if the variable isn&#8217;t found at the global scope either will it be
implicitly created.</p>
</div>
</div>
<div class="section" id="scoping-and-triggers">
<span id="trigger-scope"></span><h3><a class="toc-backref" href="#id29">Scoping and Triggers:</a><a class="headerlink" href="#scoping-and-triggers" title="Permalink to this headline">¶</a></h3>
<p>Triggers such as:</p>
<blockquote>
<div><ul class="simple">
<li>WHEN &lt;boolean expression&gt; THEN { &lt;statements&gt; }.</li>
</ul>
</div></blockquote>
<p>and</p>
<blockquote>
<div><ul class="simple">
<li>ON &lt;any expression&gt; { &lt;statements&gt; }.</li>
</ul>
</div></blockquote>
<p>Can use local variables in their trigger expressions in thier
headers or in the statements of their bodies.  The local scope
they were declared inside of stays present as part of their
&#8220;closure&#8221;.</p>
<p>Example:</p>
<div class="highlight-kerboscript"><div class="highlight"><pre><span></span><span class="kd">FUNCTION</span> <span class="nv">future_trigger</span> <span class="p">{</span>
  <span class="kd">parameter</span> <span class="nv">delay</span><span class="p">.</span>
  <span class="k">print</span> <span class="s">&quot;I will fire the trigger after &quot;</span> <span class="o">+</span> <span class="nv">delay</span> <span class="o">+</span> <span class="s">&quot; seconds.&quot;</span><span class="p">.</span>

  <span class="k">local</span> <span class="nv">trigger_time</span> <span class="ow">is</span> <span class="nv">time</span><span class="p">:</span><span class="nv">seconds</span> <span class="o">+</span> <span class="nv">delay</span><span class="p">.</span>

  <span class="c1">// Note that the variable trigger_time is local here,</span>
  <span class="c1">// yet this trigger still works after the function</span>
  <span class="c1">// has completed and returned:</span>
  <span class="k">when</span> <span class="nv">time</span><span class="p">:</span><span class="nv">seconds</span> <span class="o">&gt;</span> <span class="nv">trigger_time</span> <span class="k">then</span> <span class="p">{</span>
    <span class="k">print</span> <span class="s">&quot;I am now firing the trigger off.&quot;</span><span class="p">.</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="k">print</span> <span class="s">&quot;Before calling future_trigger(3).&quot;</span><span class="p">.</span>
<span class="nv">future_trigger</span><span class="p">(</span><span class="mf">3</span><span class="p">).</span>
<span class="k">print</span> <span class="s">&quot;After calling future_trigger(3), now waiting 5 seconds.&quot;</span><span class="p">.</span>
<span class="k">print</span> <span class="s">&quot;You should see the trigger message during this wait.&quot;</span><span class="p">.</span>
<span class="k">wait</span> <span class="mf">5</span><span class="p">.</span>
<span class="k">print</span> <span class="s">&quot;Done waiting.  Program over.&quot;</span><span class="p">.</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<div class="last versionadded">
<p><span class="versionmodified">New in version 1.1.0: </span>In the past, triggers such as WHEN and ON were not
able to use local variables in their check condintions.
They had to use only global variables in order to
be trigger-able after the local scope goes away.  Now
these triggers preserve their &#8220;closure scope&#8221; so they
can use any local variables.</p>
</div>
</div>
</div>
<div class="section" id="lazyglobal-directive">
<span id="lazyglobal"></span><h3><a class="toc-backref" href="#id30"><code class="docutils literal"><span class="pre">&#64;LAZYGLOBAL</span></code> directive</a><a class="headerlink" href="#lazyglobal-directive" title="Permalink to this headline">¶</a></h3>
<p>Often the fact that you can get an implicit global variable declared
without intending to can lead to a lot of code maintenance headaches
down the road.  If you make a typo in a variable name, you end up
creating a new variable instead of generating an error.  Or you may just
forget to mark the variable as local when you intended to.</p>
<p>If you wish to instruct Kerboscript to alter its behavior and
disable its normal implicit globals, and instead demand that all
variables MUST be explicitly declared and may not use implied
lazy scoping, the <code class="docutils literal"><span class="pre">&#64;LAZYGLOBAL</span></code> compiler directive allows you to
do that.</p>
<p>If you place the words:</p>
<div class="highlight-kerboscript"><div class="highlight"><pre><span></span><span class="p">@</span><span class="nv">LAZYGLOBAL</span> <span class="nb">OFF</span><span class="p">.</span>
</pre></div>
</div>
<p>At the start of your program, you will turn off the compiler&#8217;s
lazy global feature and it will require you to explicitly mention
all variables you use in a declaration somewhere (with the
exception of the built-in variables such as THROTTLE, STEERING,
SHIP, and so on.)</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The &#64;LAZYGLOBAL directive does not affect LOCK statements.
LOCKS are a special case that define new pseudo-functions
when encountered and don&#8217;t quite work the same way as
SET statements do. Thus even with &#64;LAZYGLOBAL OFF, it&#8217;s still
possible to make a LOCK statement with a typo in the identifier
name and it will still create the new typo&#8217;ed lock that way.</p>
</div>
<div class="section" id="lazyglobal-can-only-exist-at-the-top-of-your-code">
<h4>&#64;LAZYGLOBAL Can only exist at the top of your code.<a class="headerlink" href="#lazyglobal-can-only-exist-at-the-top-of-your-code" title="Permalink to this headline">¶</a></h4>
<p>The &#64;LAZYGLOBAL compile directive is only allowed as the first
non-comment thing in the program file.  This is because it
instructs the compiler to change its default behavior for the
duration of the entire file&#8217;s compile.</p>
</div>
<div class="section" id="lazyglobal-makes-local-and-global-mandatory">
<h4>&#64;LAZYGLOBAL Makes <code class="docutils literal"><span class="pre">LOCAL</span></code> and <code class="docutils literal"><span class="pre">GLOBAL</span></code> mandatory<a class="headerlink" href="#lazyglobal-makes-local-and-global-mandatory" title="Permalink to this headline">¶</a></h4>
<p>Normally the keywords <code class="docutils literal"><span class="pre">local</span></code> and <code class="docutils literal"><span class="pre">global</span></code> can be left off
as optional in declare <strong>identifier</strong> statements.  But when you
turn LAZYGLOBAL off, the compiler starts requiring them to be
explicitly stated for <strong>declare identifier</strong> statements, to
force yourself to be clear and explicit about the difference.</p>
<p>For example, this program, which is valid:</p>
<div class="highlight-kerboscript"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nv">foo</span> <span class="p">{</span><span class="k">print</span> <span class="s">&quot;foo &quot;</span><span class="p">.</span> <span class="p">}</span>
<span class="k">declare</span> <span class="nv">x</span> <span class="ow">is</span> <span class="mf">1</span><span class="p">.</span>

<span class="k">print</span> <span class="nv">foo</span><span class="p">()</span> <span class="o">+</span> <span class="nv">x</span><span class="p">.</span>
</pre></div>
</div>
<p>Starts giving errors when you add &#64;LAZYGLOBAL OFF to the top:</p>
<div class="highlight-kerboscript"><div class="highlight"><pre><span></span><span class="p">@</span><span class="nv">LAZYGLOBAL</span> <span class="nb">OFF</span><span class="p">.</span>
<span class="kd">function</span> <span class="nv">foo</span> <span class="p">{</span><span class="k">print</span> <span class="s">&quot;foo &quot;</span><span class="p">.</span> <span class="p">}</span>
<span class="k">declare</span> <span class="nv">x</span> <span class="ow">is</span> <span class="mf">1</span><span class="p">.</span>

<span class="k">print</span> <span class="nv">foo</span><span class="p">()</span> <span class="o">+</span> <span class="nv">x</span><span class="p">.</span>
</pre></div>
</div>
<p>Which you fix by explicitly stating the local keyword, as follows:</p>
<div class="highlight-kerboscript"><div class="highlight"><pre><span></span><span class="p">@</span><span class="nv">LAZYGLOBAL</span> <span class="nb">OFF</span><span class="p">.</span>
<span class="kd">function</span> <span class="nv">foo</span> <span class="p">{</span><span class="k">print</span> <span class="s">&quot;foo &quot;</span><span class="p">.</span> <span class="p">}</span>  <span class="c1">// This does not need the &#39;local&#39; keyword added</span>
<span class="k">declare</span> <span class="k">local</span> <span class="nv">x</span> <span class="ow">is</span> <span class="mf">1</span><span class="p">.</span>          <span class="c1">// But this does because it is a declare *identifier* statement.</span>
                               <span class="c1">// you could have also just said:</span>
                               <span class="c1">//     local x is 1.</span>
                               <span class="c1">// without the &#39;declare&#39; keyword.</span>

<span class="k">print</span> <span class="nv">foo</span><span class="p">()</span> <span class="o">+</span> <span class="nv">x</span><span class="p">.</span>
</pre></div>
</div>
<p>If you get in the habit of just writing your <strong>declare identifier</strong>
statements like <code class="docutils literal"><span class="pre">local</span> <span class="pre">x</span> <span class="pre">is</span> <span class="pre">1.</span></code> or <code class="docutils literal"><span class="pre">global</span> <span class="pre">x</span> <span class="pre">is</span> <span class="pre">1.</span></code>, which is
probably nicer to read anyway, the issue won&#8217;t come up.</p>
</div>
<div class="section" id="longer-example-of-use">
<h4>Longer Example of use<a class="headerlink" href="#longer-example-of-use" title="Permalink to this headline">¶</a></h4>
<p>Example:</p>
<div class="highlight-kerboscript"><div class="highlight"><pre><span></span><span class="p">@</span><span class="nv">LAZYGLOBAL</span> <span class="nb">off</span><span class="p">.</span>
<span class="k">global</span> <span class="nv">num</span> <span class="ow">TO</span> <span class="mf">1</span><span class="p">.</span>
<span class="k">IF</span> <span class="nb">TRUE</span> <span class="p">{</span>
  <span class="k">LOCAL</span> <span class="nv">Y</span> <span class="ow">IS</span> <span class="mf">2</span><span class="p">.</span>
  <span class="k">SET</span> <span class="nv">num</span> <span class="ow">TO</span> <span class="nv">num</span> <span class="o">+</span> <span class="nv">Y</span><span class="p">.</span> <span class="c1">// This is fine.  num exists already as a global and</span>
                      <span class="c1">// you&#39;re adding the local Y to it.</span>
  <span class="k">SET</span> <span class="nv">nim</span> <span class="ow">TO</span> <span class="mf">20</span><span class="p">.</span> <span class="c1">// This typo generates an error.  There is</span>
                 <span class="c1">// no such variable &quot;nim&quot; and @LAZYGLOBAL OFF</span>
                 <span class="c1">// says not to implicitly make it.</span>
<span class="p">}.</span>
</pre></div>
</div>
<dl class="docutils">
<dt>Why <code class="docutils literal"><span class="pre">LAZYGLOBAL</span> <span class="pre">OFF</span></code>?</dt>
<dd>The rationale behind <code class="docutils literal"><span class="pre">LAZYGLOBAL</span> <span class="pre">OFF.</span></code> is to primarily be used in
cases where you&#8217;re writing a library of function calls you intend to
use elsewhere, and want to be careful not to accidentally make
them dependent on globals outside the function itself.</dd>
</dl>
<p>The <code class="docutils literal"><span class="pre">&#64;LAZYGLOBAL</span> <span class="pre">OFF.</span></code> directive is meant to mimic Perl&#8217;s <code class="docutils literal"><span class="pre">use</span> <span class="pre">strict;</span></code>
directive.</p>
<hr class="docutils" />
<dl class="docutils">
<dt>History:</dt>
<dd><p class="first">Kerboscript began its life as a language in which you never have to
declare a variable if you don&#8217;t want to.  You can just create any
variable implicitly by just using it in a SET statement.</p>
<p>There are a variety of programming languages that work like this,
such as Perl, JavaScript, and Lua.  However, they all share one
thing in common - once you want to allow the possibility of having
local variables, you have to figure out how this should work with
the implicit variable declaration feature.</p>
<p class="last">And all those languages went with the same solution, which
Kerboscript now follows as well.  Because implicit undeclared
variables are intended to be a nice easy way for new users to
ease into programming, they should always default to being
global so that people who wish to keep programming that way
don&#8217;t need to understand or deal with scope.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="user_functions.html" class="btn btn-neutral float-right" title="KerboScript User Functions" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="flow.html" class="btn btn-neutral" title="Flow Control" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; <a href="../copyright.html">Copyright</a> 2013-2016, Developed and maintained by kOS Team, Originally By Nivekk.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.1.3.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>